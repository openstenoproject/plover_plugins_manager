[tox]
envlist = python, packaging

[testenv]
passenv = LC_ALL
deps =
	-U
	-rtest/requirements.txt
commands =
	pytest {posargs}
usedevelop = True

[testenv:packaging]
skip_install = True
deps =
	{[testenv]deps}
	check-manifest
	readme-renderer[md]
	twine
	wheel
commands =
	check-manifest
	python setup.py check -m -s
	python -c 'import shutil; shutil.rmtree("dist", ignore_errors=True)'
	python setup.py sdist bdist_wheel
	twine check dist/*

[pytest]
addopts = -ra -n4
